install.packages("RSQLite")
library(DBI)
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
#BBDD
futbol <- dbConnect(RSQLite::SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
#BBDD
futbol <- dbConnect(RSQLite::SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
tablas <- dbListTables(futbol)
print(tablas)
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
tablas <- dbListTables(futbol)
print(tablas)
tablas <- dbListTables(futbol)
print(tablas)
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
tablas <- dbListTables(futbol, "Partidos")
print(tablas)
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
tablas <- dbListTables(futbol, "Partidos")
print(tablas)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
tablas <- dbListTables(futbol, "Partidos")
print(tablas)
futbol <- dbConnect(SQLite(), dbname = "Futbol_Europeo_BBDD.sqlite")
tablas <- dbListTables(futbol, "Partidos")
print(tablas)
goles_athletic_local <- dbGetQuery(futbol, "SELECT * FROM Partidos WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'")
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
library(tidyverse)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
print(futbol)
#Tablas de la BBDD
#vista_t1 <- "SELECT * FROM Divisiones"
#Divisiones <- dbGetQuery(futbol, vista_1)
#vista_t2 <- "SELECT * FROM Partidos"
#Partidos <- dbGetQuery(futbol, vista_2)
#Variables
goles_athletic_local <- dbGetQuery(futbol, "SELECT * FROM Partidos WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'")
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
print(futbol)
#Tablas de la BBDD
#vista_1 <- "SELECT * FROM Divisiones"
#Divisiones <- dbGetQuery(futbol, vista_1)
#vista_2 <- "SELECT * FROM Partidos"
#Partidos <- dbGetQuery(futbol, vista_2)
#Variables
goles_athletic_local <- dbGetQuery(futbol, "SELECT * FROM Partidos WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'")
goles_athletic_visitante <- dbGetQuery(futbol, "SELECT * FROM Partidos WHERE Cod_Division='SP1' AND Team_Visitante='Ath Bilbao'")
View(goles_athletic_local)
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
print(futbol)
#Tablas de la BBDD
#vista_1 <- "SELECT * FROM Divisiones"
#Divisiones <- dbGetQuery(futbol, vista_1)
#vista_2 <- "SELECT * FROM Partidos"
#Partidos <- dbGetQuery(futbol, vista_2)
#Variables
goles_athletic_local <- dbGetQuery(futbol,
"SELECT Fecha, Team_Local, Goles_Local, Goles_Visitante, Team_Visitante, Ganador, Temporada
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'")
goles_athletic_visitante <- dbGetQuery(futbol,
"SELECT Fecha, Team_Local, Goles_Local, Goles_Visitante, Team_Visitante, Ganador, Temporada
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Visitante='Ath Bilbao'")
g1718l <-
g1718v <-
g17l <-
g17v <-
g18l <-
g18v <-
#"laliga_17-18" <- dbGetQuery(futbol, "SELECT * FROM laliga_2017_2018")
View(goles_athletic_visitante)
g1718l <- goles_athletic_local[c(39:76), c("Goles_Local", "Goles_Visitante", "Ganador")]
View(g1718l)
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
print(futbol)
#Tablas de la BBDD
#vista_1 <- "SELECT * FROM Divisiones"
#Divisiones <- dbGetQuery(futbol, vista_1)
#vista_2 <- "SELECT * FROM Partidos"
#Partidos <- dbGetQuery(futbol, vista_2)
#Variables
goles_athletic_local <- dbGetQuery(futbol,
"SELECT Fecha, Team_Local, Goles_Local, Goles_Visitante, Team_Visitante, Ganador, Temporada
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'")
goles_athletic_visitante <- dbGetQuery(futbol,
"SELECT Fecha, Team_Local, Goles_Local, Goles_Visitante, Team_Visitante, Ganador, Temporada
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Visitante='Ath Bilbao'")
g1718l <- goles_athletic_local[c(39:76), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
g1718v <- goles_athletic_visitante[c(39:76), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
g17l <- goles_athletic_local[c(58:76), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
g17v <-goles_athletic_visitante[c(58:76), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
g18l <-goles_athletic_local[c(39:57), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
g18v <-goles_athletic_visitante[c(39:57), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
#"laliga_17-18" <- dbGetQuery(futbol, "SELECT * FROM laliga_2017_2018")
View(g17l)
#Paquetes a utilizar
library(readxl)
library(tinytex)
library(tidyverse)
library(flextable)
library(ggwordcloud)
#BBDD
hoteles <- read_excel("C:\\Users\\guill\\Documents\\Trabajos\\Hoteles_TF - (R)\\Hoteles BBDD.xlsx")
#Funciones
cv <- function(x, na.rm = FALSE) {
sd(x, na.rm=na.rm) / mean(x, na.rm=na.rm) * 100
}
moda<- function(x) {
return(as.numeric(names(which.max(table(x)))))
}
#variables
rating_francia <- hoteles[c(1:1557), c("Rating", "Hotel_name")]
rating_cancun <- hoteles[c(2219:3810), c("Rating", "Hotel_name")]
rating_Grand <- hoteles[c(2219:3197), "Rating"]
rating_Inter <- hoteles[c(3198:3810), "Rating"]
Resumen1=list("N de Datos"=length, Min=min, Max=max, Moda=moda, Media=mean, Mediana=median, Desviación=sd)
Resumen2=list("N de Datos"=length, Min=min, Max=max, Media=mean, Desviacion=sd, CV=cv)
Resumen3=data.frame(Intervalos=c("Bajo", "Regular", "Bueno", "Muy Bueno", "Excelente"), Valores=c("0 - 3", "3 - 5", "5 - 8", "8 - 10", "10"))
Resumen4=data.frame(Bueno=c("3%", "3%", "2%"), Excelente=c("25%", "18%", "21%"), "Muy Bueno"=c("7%", "8%", "6%"))
Resumen5=data.frame(Hoteles=c("barriere-le-majestic", "Fairmont Monte Carlo", "Hyatt Regency Palais", "."), Bueno=c("3%", "3%", "2%", "8%"), Excelente=c("25%", "18%", "21%", "64%"), "Muy Bueno"=c("7%", "8%", "6%", "21%"), "Total %"=c("35%", "29%", "29%", "93%"))
# Para Calcular Frecuencias de los Intervalos
# exelente <- rating_francia %>% filter(Rating == 10)
# muy_bueno <- rating_francia %>% filter(Rating >= 8, Rating < 10)
# bueno <- rating_francia %>% filter(Rating >= 5, Rating < 8)
# regular <- rating_francia %>% filter(Rating >= 3, Rating < 5)
# bajo <- rating_francia %>% filter(Rating >= 0, Rating < 3)
Intervalos <- c("Bajo", "Regular", "Bueno", "Muy Bueno", "Excelente")
Frecuencia <- c(34, 59, 123, 340, 1001)
intervalos <- data.frame(Intervalos, Frecuencia)
# Para Calcular Frecuencias de los Intervalos del hotel x
# francia_exelente <- rating_francia %>% filter(Rating == 10, Hotel_name == "x")
# francia_muy_bueno <- rating_francia %>% filter(Rating >= 8, Rating < 10, Hotel_name == "x")
# francia_bueno <- rating_francia %>% filter(Rating >= 5, Rating < 8, Hotel_name == "x")
# francia_regular <- rating_francia %>% filter(Rating >= 3, Rating < 5, Hotel_name == "x")
# francia_bajo <- rating_francia %>% filter(Rating >= 0, Rating < 3, Hotel_name == "x")
Hoteles <- c("barriere-le-majestic", "barriere-le-majestic", "barriere-le-majestic", "barriere-le-majestic", "barriere-le-majestic", "Fairmont Monte Carlo", "Fairmont Monte Carlo", "Fairmont Monte Carlo", "Fairmont Monte Carlo", "Fairmont Monte Carlo", "Hyatt Regency Palais", "Hyatt Regency Palais", "Hyatt Regency Palais", "Hyatt Regency Palais", "Hyatt Regency Palais")
Intervalos <- c("Bajo", "Regular", "Bueno", "Muy Bueno", "Excelente", "Bajo", "Regular", "Bueno", "Muy Bueno", "Excelente", "Bajo", "Regular", "Bueno", "Muy Bueno", "Excelente")
Frecuencia <- c(11, 17, 44, 115, 387, 18, 31, 43, 129, 281, 5, 11, 36, 96, 333)
intervalos_francia <- data.frame(Hoteles, Intervalos, Frecuencia)
# Para Calcular Frecuencias de los hoteles de Cancún
# grand <- rating_Grand %>% filter(Rating == x)
# inter <- rating_Inter %>% filter(Rating == x)
Puntuación_Grand <- c(2, 4, 6, 8, 10)
Frecuencia <- c(18, 22, 51, 137, 751)
f_Grand <- data.frame(Puntuación_Grand, Frecuencia)
Puntuación_Inter <- c(2, 4, 6, 8, 10)
Frecuencia <- c(29, 17, 56, 125, 386)
f_Inter <- data.frame(Puntuación_Inter, Frecuencia)
hoteles %>% summarise_at(vars(Rating), Resumen1) %>% mutate(across(everything(), ~ round(., 2))) %>% mutate(Variable="Rating") %>% select(last_col(),everything()) %>% flextable() %>% fontsize(size=10,part="all") %>% autofit()
Resumen3 %>% flextable() %>% fontsize(size=10,part="all") %>% autofit()
ggplot(intervalos, aes(label=Intervalos, size=Frecuencia, color=Frecuencia)) + geom_text_wordcloud() + scale_size_area(max_size = 25) + theme_minimal() + scale_color_gradient(low = "#458B00", high = "#7FFF00")
ggplot(intervalos_francia, aes(x=Intervalos, y=Frecuencia, fill=Hoteles)) + geom_col(color="#8F8F8F", position="dodge") + scale_fill_manual(values=c("#66CD00", "#7FFF00", "#458B00")) + theme_bw()
ggplot(intervalos_francia, aes(x=Intervalos, y=Frecuencia, fill=Hoteles)) + geom_col(color="#8F8F8F", position="fill") + scale_fill_manual(values=c("#66CD00", "#7FFF00", "#458B00")) + theme_bw()
Resumen4 %>% flextable() %>% fontsize(size=10,part="all") %>% autofit()
Resumen5 %>% flextable() %>% fontsize(size=10,part="all") %>% autofit()
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
print(futbol)
#Tablas de la BBDD
#vista_1 <- "SELECT * FROM Divisiones"
#Divisiones <- dbGetQuery(futbol, vista_1)
#vista_2 <- "SELECT * FROM Partidos"
#Partidos <- dbGetQuery(futbol, vista_2)
#Variables
goles_athletic_local <- dbGetQuery(futbol,
"SELECT Fecha, Team_Local, Goles_Local, Goles_Visitante, Team_Visitante, Ganador, Temporada
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'")
goles_athletic_visitante <- dbGetQuery(futbol,
"SELECT Fecha, Team_Local, Goles_Local, Goles_Visitante, Team_Visitante, Ganador, Temporada
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Visitante='Ath Bilbao'")
g1718l <- goles_athletic_local[c(39:76), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
g1718v <- goles_athletic_visitante[c(39:76), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
g17l <- goles_athletic_local[c(58:76), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
g17v <-goles_athletic_visitante[c(58:76), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
g18l <-goles_athletic_local[c(39:57), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
g18v <-goles_athletic_visitante[c(39:57), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
#"laliga_17-18" <- dbGetQuery(futbol, "SELECT * FROM laliga_2017_2018")
View(g1718l)
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
print(futbol)
#Tablas de la BBDD
#vista_1 <- "SELECT * FROM Divisiones"
#Divisiones <- dbGetQuery(futbol, vista_1)
#vista_2 <- "SELECT * FROM Partidos"
#Partidos <- dbGetQuery(futbol, vista_2)
#Variables
goles_athletic_local <- dbGetQuery(futbol,
"SELECT Fecha, Team_Local, Goles_Local, Goles_Visitante, Team_Visitante, Ganador, Temporada
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'")
goles_athletic_visitante <- dbGetQuery(futbol,
"SELECT Fecha, Team_Local, Goles_Local, Goles_Visitante, Team_Visitante, Ganador, Temporada
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Visitante='Ath Bilbao'")
g1718l <- goles_athletic_local[c(39:76), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
g1718v <- goles_athletic_visitante[c(39:76), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
#g17l <- goles_athletic_local[c(58:76), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
#g17v <-goles_athletic_visitante[c(58:76), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
#g18l <-goles_athletic_local[c(39:57), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
#g18v <-goles_athletic_visitante[c(39:57), c("Goles_Local", "Goles_Visitante", "Ganador", "Temporada")]
#"laliga_17-18" <- dbGetQuery(futbol, "SELECT * FROM laliga_2017_2018")
View(g1718l)
