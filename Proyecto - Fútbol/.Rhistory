ORDER BY Ganador")
v_man <- v_man %>% mutate(Lugar = case_when(Equipo == "Man City" ~ "Local", Equipo == "Man City." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
#Para ultimo objetivo
#goles_athletic_local <- dbGetQuery(futbol, "SELECT * FROM laliga_2017_2018
#	WHERE Team_Local='Ath Bilbao'")
remove(Divisiones)
Partidos <- dbGetQuery(futbol,
"SELECT Cod_Division, Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, round.digits = 2) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% summarise_at(var(Variable), resumen)
Partidos <- dbGetQuery(futbol,
"SELECT Cod_Division, Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, round.digits = 2) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% summarise_at(Partidos, resumen)
Partidos <- dbGetQuery(futbol,
"SELECT Cod_Division, Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, round.digits = 2) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
library(tidyverse)
library(kableExtra)
library(cowplot)
library(summarytools)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
#Funciones
Moda<- function(x) {
return(as.numeric(names(which.max(table(x)))))
}
resumen <- Moda
#Tablas de la BBDD
Divisiones <- dbGetQuery(futbol, "SELECT * FROM Divisiones")
Partidos <- dbGetQuery(futbol, "SELECT * FROM Partidos")
#variables
v_ath <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'
UNION
SELECT * FROM Obj_1)
ORDER BY Ganador")
v_ath <- v_ath %>% mutate(Lugar = case_when(Equipo == "Ath Bilbao" ~ "Local", Equipo == "Ath Bilbao." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
v_man <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='E0' AND Team_Local='Man City'
UNION
SELECT * FROM Obj_12)
ORDER BY Ganador")
v_man <- v_man %>% mutate(Lugar = case_when(Equipo == "Man City" ~ "Local", Equipo == "Man City." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
#Para ultimo objetivo
#goles_athletic_local <- dbGetQuery(futbol, "SELECT * FROM laliga_2017_2018
#	WHERE Team_Local='Ath Bilbao'")
remove(Divisiones)
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
library(tidyverse)
library(kableExtra)
library(cowplot)
library(summarytools)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
#Funciones
Moda<- function(x) {
return(as.numeric(names(which.max(table(x)))))
}
#Tablas de la BBDD
Divisiones <- dbGetQuery(futbol, "SELECT * FROM Divisiones")
Partidos <- dbGetQuery(futbol, "SELECT * FROM Partidos")
#variables
v_ath <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'
UNION
SELECT * FROM Obj_1)
ORDER BY Ganador")
v_ath <- v_ath %>% mutate(Lugar = case_when(Equipo == "Ath Bilbao" ~ "Local", Equipo == "Ath Bilbao." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
v_man <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='E0' AND Team_Local='Man City'
UNION
SELECT * FROM Obj_12)
ORDER BY Ganador")
v_man <- v_man %>% mutate(Lugar = case_when(Equipo == "Man City" ~ "Local", Equipo == "Man City." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
#Para ultimo objetivo
#goles_athletic_local <- dbGetQuery(futbol, "SELECT * FROM laliga_2017_2018
#	WHERE Team_Local='Ath Bilbao'")
remove(Divisiones)
Partidos <- dbGetQuery(futbol,
"SELECT Cod_Division, Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv", Moda()), transpose = TRUE, round.digits = 2) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
Partidos <- dbGetQuery(futbol,
"SELECT Cod_Division, Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv", Moda), transpose = TRUE, round.digits = 2) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
Partidos <- dbGetQuery(futbol,
"SELECT Cod_Division, Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), Moda, transpose = TRUE, round.digits = 2) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
Partidos <- dbGetQuery(futbol,
"SELECT Cod_Division, Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, round.digits = 2) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
View(tb_resumen1)
Partidos <- dbGetQuery(futbol,
"SELECT Cod_Division, Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, round.digits = 2) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% summarise_at(Variable, Moda)
View(tb_resumen1)
Partidos <- dbGetQuery(futbol,
"SELECT Cod_Division, Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, round.digits = 2) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% summarise_at(Partidos, Moda)
Partidos <- dbGetQuery(futbol,
"SELECT Cod_Division, Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, round.digits = 2) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% summarise(Partidos, Moda)
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, round.digits = 2) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
Partidos <- dbGetQuery(futbol,
"SELECT Cod_Division, Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, round.digits = 2) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% summarise(Partidos, Moda)
fuap <- c(Moda)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% summarise(Partidos, fuap)
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
view(tb_resumen1)
view(tb_resumen1)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, order="c")
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, justify="c")
st_options(lang="es")
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, justify="c")
st_options(lang="es")
tb_resumen2 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, justify="c") %>% rename(Desv_std=Dev.std.)
view()
view(tb_resumen2)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
library(tidyverse)
library(cowplot)
library(summarytools)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
#Tablas de la BBDD
Divisiones <- dbGetQuery(futbol, "SELECT * FROM Divisiones")
Partidos <- dbGetQuery(futbol, "SELECT * FROM Partidos")
#variables
fuap <- list(Moda)
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
library(tidyverse)
library(cowplot)
library(summarytools)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
#Tablas de la BBDD
Divisiones <- dbGetQuery(futbol, "SELECT * FROM Divisiones")
Partidos <- dbGetQuery(futbol, "SELECT * FROM Partidos")
#variables
v_ath <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'
UNION
SELECT * FROM Obj_1)
ORDER BY Ganador")
v_ath <- v_ath %>% mutate(Lugar = case_when(Equipo == "Ath Bilbao" ~ "Local", Equipo == "Ath Bilbao." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
v_man <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='E0' AND Team_Local='Man City'
UNION
SELECT * FROM Obj_12)
ORDER BY Ganador")
v_man <- v_man %>% mutate(Lugar = case_when(Equipo == "Man City" ~ "Local", Equipo == "Man City." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
#Para ultimo objetivo
#goles_athletic_local <- dbGetQuery(futbol, "SELECT * FROM laliga_2017_2018
#	WHERE Team_Local='Ath Bilbao'")
remove(Divisiones)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
st_options(lang="es")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, justify="c") %>% rename(Desv_std=Dev.std.)
view(tb_resumen1)
remove(tb_resumen1)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
st_options(lang="es")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, justify="c") %>% rename(Desv_std=Dev.std.)
view(tb_resumen1)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, justify="c") %>% rename(Desv_std=Dev.std.)
remove(tb_resumen1)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
st_options(lang="es")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, justify="c") %>% rename(Desv_std=Dev.std.)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE, justify="c") %>% rename(Desv_std=Dev.std.)
remove(tb_resumen1)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5"
remove(tb_resumen1)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
library(tidyverse)
library(cowplot)
library(summarytools)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
#Tablas de la BBDD
Divisiones <- dbGetQuery(futbol, "SELECT * FROM Divisiones")
Partidos <- dbGetQuery(futbol, "SELECT * FROM Partidos")
#variables
v_ath <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'
UNION
SELECT * FROM Obj_1)
ORDER BY Ganador")
v_ath <- v_ath %>% mutate(Lugar = case_when(Equipo == "Ath Bilbao" ~ "Local", Equipo == "Ath Bilbao." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
v_man <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='E0' AND Team_Local='Man City'
UNION
SELECT * FROM Obj_12)
ORDER BY Ganador")
v_man <- v_man %>% mutate(Lugar = case_when(Equipo == "Man City" ~ "Local", Equipo == "Man City." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
#Para ultimo objetivo
#goles_athletic_local <- dbGetQuery(futbol, "SELECT * FROM laliga_2017_2018
#	WHERE Team_Local='Ath Bilbao'")
remove(Divisiones)
library(kableExtra)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
remove(tb_resumen1)
#funciones
moda<- function(x) {
return(as.numeric(names(which.max(table(x)))))
}
#Tablas de la BBDD
Divisiones <- dbGetQuery(futbol, "SELECT * FROM Divisiones")
Partidos <- dbGetQuery(futbol, "SELECT * FROM Partidos")
#variables
resumen <- list("Total de Datos"=length, Moda=moda)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% summarise(Partidos, resumen)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% summarise(Partidos, resumen)
View(Partidos)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% summarise(Partidos, resumen)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% summarise(c(Goles_Local, Goles_Visitante), resumen)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% summarise(c("Goles Local", "Goles Visitante"), resumen)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% reframe(c("Goles Local", "Goles Visitante"), resumen)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% mutate("Total de datos"=length(c(Goles_Local, Goles_Visitante)), Moda=moda(c(Goles_Local, Goles_Visitante))) %>% select(last_col(),everything())
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% mutate("Total de datos"=length(c(Goles_Local, Goles_Visitante)), Moda=moda(c(Goles_Local, Goles_Visitante))) %>% select(last_col(),everything()) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% mutate("Total de datos"=length(c(Goles_Local, Goles_Visitante)), Moda=moda(c(Goles_Local, Goles_Visitante))) %>% select(last_col(),everything()
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% mutate("Total de datos"=length(c(Goles_Local, Goles_Visitante)), Moda=moda(c(Goles_Local, Goles_Visitante))) %>% select(last_col(),everything())
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% mutate("Total de datos"=length(Goles_Local, Goles_Visitante), Moda=moda(Goles_Local, Goles_Visitante)) %>% select(last_col(),everything())
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=length(Goles_Local, Goles_Visitante), Moda=moda(Goles_Local, Goles_Visitante)) %>% select(last_col(),everything())
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=length(c(Goles_Local, Goles_Visitante)), Moda=moda(c(Goles_Local, Goles_Visitante))) %>% select(last_col(),everything())
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=length(vars(Goles_Local, Goles_Visitante)), Moda=moda(vars(Goles_Local, Goles_Visitante)))
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=length(Goles_Local), Moda=moda(Goles_Local)) %>% select(last_col(),everything()) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=length(Partidos), Moda=moda(Partidos)) %>% select(last_col(),everything())
moda(Partidos)
moda(Partidos$Goles_Local)
moda(Partidos$Goles_Visitante)
moda(Goles_Local)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=length(Partidos$Goles_Local, Partidos$Goles_Visitante), Moda=moda(Partidos$Goles_Local, Partidos$Goles_Visitante)) %>% select(last_col(),everything())
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=length(c(Partidos$Goles_Local, Partidos$Goles_Visitante)), Moda=moda(c(Partidos$Goles_Local, Partidos$Goles_Visitante))) %>% select(last_col(),everything())
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=length(c(Partidos$Goles_Local, Partidos$Goles_Visitante)), Moda=moda(c(Partidos$Goles_Local, Partidos$Goles_Visitante)))
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=length(c(Partidos$Goles_Local, Partidos$Goles_Visitante)), Moda=moda(c(Partidos$Goles_Local, Partidos$Goles_Visitante))) %>% select(last_col(),everything())
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=length(c(Partidos$Goles_Local, Partidos$Goles_Visitante)), Moda=moda(c(Partidos$Goles_Local, Partidos$Goles_Visitante))) %>% select(last_col(2),everything())
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante)))
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(10, 11), everything())
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(10, 11), 2)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(10, 11), everything(2)
3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(10, 11), everything()-1)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(10, 11), everything())
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(10, 11), everything(1)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(10, 11), everything(0)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(10, 11), everything(1))
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(10, 11), 1, everything())
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(10, 11, 1, 2, 3, 4, 5, 6, 7, 8, 9))
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(1, 10, 11, 2, 3, 4, 5, 6, 7, 8, 9))
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(1, 10, 11, 2, 3, 4, 5, 6, 7, 8, 9)) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
moda(Goles_Local)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(1, 10, 11, 2, 3, 4, 5, 6, 7, 8, 9)) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
remove(tb_resumen1)
remove(tb_resumen1, Partidos)
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
library(tidyverse)
library(cowplot)
library(summarytools)
library(kableExtra)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
#funciones
moda<- function(x) {
return(as.numeric(names(which.max(table(x)))))
}
#Tablas de la BBDD
Divisiones <- dbGetQuery(futbol, "SELECT * FROM Divisiones")
Partidos <- dbGetQuery(futbol, "SELECT * FROM Partidos")
#variables
v_ath <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'
UNION
SELECT * FROM Obj_1)
ORDER BY Ganador")
v_ath <- v_ath %>% mutate(Lugar = case_when(Equipo == "Ath Bilbao" ~ "Local", Equipo == "Ath Bilbao." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
v_man <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='E0' AND Team_Local='Man City'
UNION
SELECT * FROM Obj_12)
ORDER BY Ganador")
v_man <- v_man %>% mutate(Lugar = case_when(Equipo == "Man City" ~ "Local", Equipo == "Man City." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
#Para ultimo objetivo
#goles_athletic_local <- dbGetQuery(futbol, "SELECT * FROM laliga_2017_2018
#	WHERE Team_Local='Ath Bilbao'")
remove(Divisiones)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(1, 10, 11, 2, 3, 4, 5, 6, 7, 8, 9)) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#F5F5F5") %>% row_spec(0, bold = T, background="#F5F5F5")
remove(tb_resumen1, Partidos)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate(across(c(2,3,9), ~ round(., 2))) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(1, 10, 11, 2, 3, 4, 5, 6, 7, 8, 9)) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante"))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#EEEEEE") %>% row_spec(0, bold = T, background="#EEEEEE")
remove(tb_resumen1, Partidos)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(1, 10, 11, 2, 3, 4, 5, 6, 7, 8, 9)) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% mutate(CV=CV*100)
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
library(tidyverse)
library(cowplot)
library(summarytools)
library(kableExtra)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
#funciones
moda<- function(x) {
return(as.numeric(names(which.max(table(x)))))
}
#Tablas de la BBDD
Divisiones <- dbGetQuery(futbol, "SELECT * FROM Divisiones")
Partidos <- dbGetQuery(futbol, "SELECT * FROM Partidos")
#variables
v_ath <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'
UNION
SELECT * FROM Obj_1)
ORDER BY Ganador")
v_ath <- v_ath %>% mutate(Lugar = case_when(Equipo == "Ath Bilbao" ~ "Local", Equipo == "Ath Bilbao." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
v_man <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='E0' AND Team_Local='Man City'
UNION
SELECT * FROM Obj_12)
ORDER BY Ganador")
v_man <- v_man %>% mutate(Lugar = case_when(Equipo == "Man City" ~ "Local", Equipo == "Man City." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
#Para ultimo objetivo
#goles_athletic_local <- dbGetQuery(futbol, "SELECT * FROM laliga_2017_2018
#	WHERE Team_Local='Ath Bilbao'")
remove(Divisiones)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(1, 10, 11, 2, 3, 4, 5, 6, 7, 8, 9)) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% mutate(CV=CV*100)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(1, 10, 11, 2, 3, 4, 5, 6, 7, 8, 9)) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% mutate(CV=CV*100)
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(1, 10, 11, 2, 3, 4, 5, 6, 7, 8, 9)) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% mutate(CV=CV*100) %>% mutate(across(c(2,3,9), ~ round(., 2)))
Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(1, 10, 11, 2, 3, 4, 5, 6, 7, 8, 9)) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% mutate(CV=CV*100) %>% mutate(across(c(4,5,11), ~ round(., 2)))
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(1, 10, 11, 2, 3, 4, 5, 6, 7, 8, 9)) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% mutate(CV=CV*100) %>% mutate(across(c(4,5,11), ~ round(., 2)))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#EEEEEE") %>% row_spec(0, bold = T, background="#EEEEEE")
remove(tb_resumen1, Partidos)
#Paquetes a utilizar
library(tinytex)
library(DBI)
library(RSQLite)
library(tidyverse)
library(cowplot)
library(summarytools)
library(kableExtra)
#BBDD
futbol <- dbConnect(SQLite(), dbname = "Fútbol Europeo BBDD.sqlite")
#Funciones
moda<- function(x) {
return(as.numeric(names(which.max(table(x)))))
}
#Tablas de la BBDD
Divisiones <- dbGetQuery(futbol, "SELECT * FROM Divisiones")
Partidos <- dbGetQuery(futbol, "SELECT * FROM Partidos")
#Variables
v_ath <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='SP1' AND Team_Local='Ath Bilbao'
UNION
SELECT * FROM Obj_1)
ORDER BY Ganador")
v_ath <- v_ath %>% mutate(Lugar = case_when(Equipo == "Ath Bilbao" ~ "Local", Equipo == "Ath Bilbao." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
v_man <- dbGetQuery(futbol,
"SELECT * FROM (SELECT Id_Partidos, Team_Local AS Equipo, Ganador
FROM Partidos
WHERE Cod_Division='E0' AND Team_Local='Man City'
UNION
SELECT * FROM Obj_12)
ORDER BY Ganador")
v_man <- v_man %>% mutate(Lugar = case_when(Equipo == "Man City" ~ "Local", Equipo == "Man City." ~ "Visitante")) %>% mutate(Ganador = recode(Ganador, "E" = "Empate", "L" = "Local", "V" = "Visitante"))
#Para ultimo objetivo
#goles_athletic_local <- dbGetQuery(futbol, "SELECT * FROM laliga_2017_2018
#	WHERE Team_Local='Ath Bilbao'")
remove(Divisiones)
Partidos <- dbGetQuery(futbol,
"SELECT Goles_Local, Goles_Visitante FROM Partidos")
tb_resumen1 <- Partidos %>% descr(stats = c("mean", "sd", "min", "q1", "med", "q3", "max","cv"), transpose = TRUE) %>% tb(order = 3) %>% mutate("Total de datos"=c(length(Partidos$Goles_Local), length(Partidos$Goles_Visitante)), Moda=c(moda(Partidos$Goles_Local), moda(Partidos$Goles_Visitante))) %>% select(c(1, 10, 11, 2, 3, 4, 5, 6, 7, 8, 9)) %>% rename(Variable=variable, Media=mean, Desv_std=sd, Min=min, Q1=q1, Med=med, Q3=q3, Max=max, CV=cv) %>% mutate(Variable= recode(Variable, "Goles_Local" = "Goles Local", "Goles_Visitante" = "Goles Visitante")) %>% mutate(CV=CV*100) %>% mutate(across(c(4,5,11), ~ round(., 2)))
tb_resumen1 %>% kable() %>% kable_styling(bootstrap_options = c("striped", "hover")) %>% column_spec(1, bold = T,  background="#E0E0E0") %>% row_spec(0, bold = T, background="#E0E0E0")
remove(tb_resumen1, Partidos)
ath_plot <- v_ath %>% group_by(Lugar, Ganador) %>% summarise(Total= n())%>%
mutate(Porcentaje=round(Total/sum(Total)*100, 1), Proporcion=round(Total/sum(Total), 2))
ggplot(ath_plot, aes(x=Lugar, y=Total, fill=Ganador)) + geom_col(position="dodge",colour="black") + labs(y="Frecuencia") + ggtitle("Registro de Partidos - Athletic Club de Bilbao") + theme_test() + ylim(c(0,160)) + scale_fill_manual(values=c("#CE93D8", "#9C27BD", "#BA68CB")) + theme(plot.title=element_text(hjust = 0.5, size=11)) +
geom_text(aes(label=paste0(Total," ", "", "(", Porcentaje, "%", ")")),
vjust=-0.5,
color="black",
hjust=0.5,
position = position_dodge(0.9),
size=3.0)
man_plot <- v_man %>% group_by(Lugar, Ganador) %>% summarise(Total= n()) %>%
mutate(Porcentaje = round(Total/sum(Total)*100, 1), Proporcion=round(Total/sum(Total), 2))
ggplot(man_plot, aes(x=Lugar, y=Total, fill=Ganador)) + geom_col(position="dodge",colour="black") + labs(y="Frecuencia") + ggtitle("Registro de Partidos - Manchester City") + theme_test() + ylim(c(0,220)) + scale_fill_manual(values=c("#CE93D8", "#9C27BD", "#BA68CB")) + theme(plot.title=element_text(hjust = 0.5, size=11)) + geom_text(aes(label=paste0(Total," ", "", "(", Porcentaje, "%", ")")),
vjust=-0.5,
color="black",
hjust=0.5,
position = position_dodge(0.9),
size=3.0)
g1 <- ggplot(ath_plot, aes (x=Lugar, y=Proporcion, fill=Ganador)) + geom_col(color="black", position="fill") + scale_fill_manual(values=c("#CE93D8", "#9C27BD", "#BA68CB")) + theme_bw() + labs(y="Proporciones") + ggtitle("Densidad de los Resultados \n(Athletic Club)") + theme(plot.title=element_text(size=11))
g2 <- ggplot(man_plot, aes (x=Lugar, y=Proporcion, fill=Ganador)) + geom_col(color="black", position="fill") + scale_fill_manual(values=c("#CE93D8", "#9C27BD", "#BA68CB")) + theme_bw() + labs(y="Proporciones") + ggtitle("Densidad de los Resultados \n(Manchester City)") + theme(plot.title=element_text(size=11))
plot_grid(g1, g2, nrow=1)
remove(v_ath, v_man, ath_plot, man_plot, g1, g2)
